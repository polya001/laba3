# laba3
## КАК ЗАПУСТИТЬ
### Подключение к серверу postgres
Открыть программу Docker Desktop(должна быть установлена)

Следуя инструкциям https://github.com/DumDereDum/DataBase_cource/blob/main/postgres/README.md нужно подключиться к серверу
### Скачивание базы данных в .csv 
С диска https://drive.google.com/drive/folders/1usY-4CxLIz_8izBB9uAbg-JQEKSkPMg6 нужно скачать файл "nyc_yellow_tiny.csv"
### Клонирование файлов формата .py с репозитория
Нажмите кнопку "Code" в правом верхнем углу. Выпадет меню, в котором нужно выбрать Download ZIP


![](https://github.com/polya001/laba3/blob/main/images/howdownload.png)

### Запуск кода
В терминале запустите последовательно команды 
```BASH
pip install psycopg2

pip install duckdb

pip install pandas

pip install sqlalchemy
```
В файлах main.py, 2bib.py, 4bib.py для tiny = "Path_to_file_nyc_yellow_tiny.csv"  указать в кавычках путь к файлу nyc_yellow_tiny.csv 

В файле 2bib.py для df_file='Path_to_file\\dbfile.db'  указать в кавычках путь к файлу dbfile.db

В файле 3bib.py для duck_file='Path_to_file\\duck.db'  указать в кавычках путь к файлу duck.db

1. запустить файл main.py
2. можно запускать файлы 1bib.py, 2bib.py, 3bib.py, 4bib.py

### Описание содержания файлов
Файл main.py загружает базу данных на сервер

Файлы 1bib.py, 2bib.py, 3bib.py, 4bib.py используют библиотеки psycopg2, sqlite3, duckdb, pandas соответственно для выполнения запросов

### Сравнение скорости выполнения запросов для 4 библиотек
![](https://github.com/polya001/laba3/blob/main/Сравнение.png)

Графики позволяют заметить, что библиотека psycopg2 работает медленнее всего, а duckdb показывает наилучшие скоростные результаты. Библиотека pandas, как и duckdb работает очень быстро.
#### PSYCOPG2
Мои впечателения от данной библиотеки из всех используемых не самые лучшие.Эта библиотека требует дополнительной установки,т.к. не является встроенной. Посколько она работает достаточно медленно, достаточно сильно нагружается цп и память, поэтому, если ноутбуку не хватает достаточной мощности, всё может хорошенько подвиснуть, для меня это стало большой проблемой при выполнении лабораторной работы. Удобством является поддержание всех предоставленных запросов, не нужно было их изменять. Согласно данным, найденным в интернете, невысокая скорость работы данной библиотеки может быть связана с выполнением транзакций.
#### SQLite
Данная библиотека не требует предустановки, что уже немного упрощает взаимодействие с ней. К минусам можно отнести то, что нужно было немного видоизменить запросы, пришлось хорошенько посерфить интернет. Скоростные результаты данной библиотеки оказались не самыми лучшими, из рассмотренных библиотек эта оказалась на середине. Невысокие показатели скорости могут быть связаны с доболнительным использованием памяти. Библиотека сначала компилирует и оптимизирует запрос, затем начинает его выполнение с выборки первых нескольких строк.
####  DuckDB
Данная библиотека порадовала тем, что, как и при работе с первой библиотекой, не нужно было менять запросы. К минусам можно отнести то, что почему-то не сразу получилось найти информацию по данной библиотеке. Она также требует предустановки. Приятно удивил встроенный интерфейс вывода результатов данной библиотеки. Показатели скорости у duckdb оказались самыми впечатляющими, наконец-то мой ноутбук не завис :) Поискав информацию, можно связать такую хорошую скорость с использованием механизма выполнения запросов с столбчатой векторизацией. Это означает, что DuckDB не следует модели клиент-сервер и полностью выполняется в рамках хост-процесса.
####  Pandas
Pandas  —  одна из самых популярных библиотек Python, имеет широкий функционал, но, если сравнивать с предыдущими библиотеками, нужно было потратить достаточное время, чтобы найти необходимый синтаксис для выполнения запросов, т.к. запросы уже не выглядят так же, как на чистом SQL. Библиотека требует дополнительной установки. Порадовала скорость работы, но всё же эта библиотека уступает DuckDB. Pandas использует только одно ядро процессора за раз для выполнения задач по манипулированию данными.
